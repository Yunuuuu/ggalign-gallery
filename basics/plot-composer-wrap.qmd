---
categories: [align_plots()]
---

# Plot Composer - Combine Any R Plots

The `ggalign` package includes the `ggwrap()` function, which enables the conversion of non-ggplot2 elements into a general object that is compatible with `align_plots()`. This provides a versatile tool for incorporating any type of graphics within R.

```{r}
library(ggalign)
```

```{r}
p1 <- ggplot(mtcars) +
    geom_point(aes(mpg, disp)) +
    ggtitle("Plot 1")
```

Add base plot:

```{r}
align_plots(
    p1,
    ggwrap(
        ~ plot(mtcars$mpg, mtcars$disp)
    )
)
```

> base plot should be provided using formula.

```{r}
align_plots(
    p1,
    ggwrap(
        ~ plot(mtcars$mpg, mtcars$disp), 
        align = "full"
    )
)
```

```{r}
align_plots(
    p1,
    ggwrap(
        ~ plot(mtcars$mpg, mtcars$disp)
    ) +
    # add title for new plot
    ggtitle('Plot 2')
)
```

Set plot widths:

```{r}
align_plots(
    p1,
    ggwrap(
        ~ plot(mtcars$mpg, mtcars$disp)
    ),
    widths = c(1, 2)
)
```

Since `ggwrap()` is automatically called in most cases, you can write code like:

```{r}
align_plots(
    p1,
    ~ plot(mtcars$mpg, mtcars$disp)
)
```

Add grid grobs, for example:

```{r}
align_plots(
    p1,
    grid::textGrob('Some really important text')
)
```

Add cluster plot:

```{r}
hc <- hclust(dist(USArrests), "ave")
align_plots(
    p1,
    ~ plot(hc)
)
```

Add lattice plots, for example:

```{r}
align_plots(
    p1,
    lattice::xyplot(disp ~ mpg, data = mtcars)
)
```

Add basic pheatmap:

```{r}
align_plots(
    p1,
    pheatmap::pheatmap(matrix(rnorm(200), 20, 10), silent = TRUE)
)
```

Add ComplexHeatmap:

```{r}
align_plots(
    p1,
    ComplexHeatmap::pheatmap(matrix(rnorm(200), 20, 10))
)
```

Tree plots can be generated by [ggtree](https://yulab-smu.top/treedata-book/chapter4.html).

```{r}
library(treeio)
library(ggtree)

nwk <- system.file("extdata", "sample.nwk", package="treeio")
tree <- read.tree(nwk)

ptree <- ggplot(tree, aes(x, y)) + geom_tree() + theme_tree()
```

As `ptree` is also a ggplot object, it can be naturally combined with `p1`.

```{r}
align_plots(
    ptree,
    p1
)
```

